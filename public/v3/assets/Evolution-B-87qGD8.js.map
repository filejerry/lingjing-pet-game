{"version":3,"file":"Evolution-B-87qGD8.js","sources":["../../../client/src/views/Evolution.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen p-6\">\r\n    <router-link to=\"/\" class=\"btn-secondary mb-6 inline-block\">\r\n      ← 返回首页\r\n    </router-link>\r\n\r\n    <div class=\"max-w-4xl mx-auto\">\r\n      <h1 class=\"text-4xl font-bold mb-6\">✨ 进化系统</h1>\r\n\r\n      <div v-if=\"petStore.currentPet\" class=\"space-y-6\">\r\n        <!-- 当前宠物信息 -->\r\n        <div class=\"card\">\r\n          <h2 class=\"text-2xl font-bold mb-4\">当前宠物</h2>\r\n          <div class=\"flex items-center gap-4\">\r\n            <div class=\"flex-1\">\r\n              <p class=\"text-xl\">{{ petStore.currentPet.name }}</p>\r\n              <p class=\"text-gray-400\">{{ petStore.currentPet.species }}</p>\r\n            </div>\r\n            <div class=\"text-right\">\r\n              <p class=\"text-sm text-gray-400\">等级 {{ petStore.currentPet.level }}</p>\r\n              <p class=\"text-sm text-gray-400\">经验 {{ petStore.currentPet.exp }}/100</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 进化候选 -->\r\n        <div class=\"card\">\r\n          <h2 class=\"text-2xl font-bold mb-4\">进化候选</h2>\r\n\r\n          <button\r\n            v-if=\"!evolutionCandidates\"\r\n            @click=\"loadEvolutionCandidates\"\r\n            class=\"btn-primary\"\r\n            :disabled=\"loading\"\r\n          >\r\n            {{ loading ? '分析中...' : '分析进化路径' }}\r\n          </button>\r\n\r\n          <div v-else-if=\"evolutionCandidates.eligible\" class=\"space-y-4\">\r\n            <div\r\n              v-for=\"candidate in evolutionCandidates.candidates\"\r\n              :key=\"candidate.path\"\r\n              class=\"border border-gray-700 rounded p-4 hover:border-white transition-all cursor-pointer\"\r\n              @click=\"selectEvolutionPath(candidate.path)\"\r\n            >\r\n              <div class=\"flex justify-between items-start mb-2\">\r\n                <h3 class=\"text-xl font-bold\">{{ candidate.name }}</h3>\r\n                <span class=\"text-sm text-gray-400\">{{ (candidate.probability * 100).toFixed(1) }}%</span>\r\n              </div>\r\n              <p class=\"text-gray-400 text-sm mb-2\">{{ candidate.description }}</p>\r\n              <div class=\"flex gap-2 flex-wrap\">\r\n                <span\r\n                  v-for=\"req in candidate.requirements\"\r\n                  :key=\"req\"\r\n                  class=\"text-xs px-2 py-1 bg-gray-800 rounded\"\r\n                >\r\n                  {{ req }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-else class=\"text-center py-8 text-gray-400\">\r\n            <p>当前条件不满足进化要求</p>\r\n            <p class=\"text-sm mt-2\">需要: 等级≥10, 经验≥100</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 无宠物状态 -->\r\n      <div v-else class=\"card text-center py-12\">\r\n        <p class=\"text-xl text-gray-400\">请先选择一只宠物</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { usePetStore } from '@/stores/pet'\r\nimport { useMCP } from '@/composables/useMCP'\r\nimport type { EvolutionCandidate } from '@/types/pet'\r\n\r\nconst petStore = usePetStore()\r\nconst { getEvolutionCandidates: mcpGetEvolution } = useMCP()\r\nconst loading = ref(false)\r\nconst evolutionCandidates = ref<EvolutionCandidate | null>(null)\r\n\r\nasync function loadEvolutionCandidates() {\r\n  if (!petStore.currentPet) return\r\n\r\n  loading.value = true\r\n  try {\r\n    evolutionCandidates.value = await mcpGetEvolution(\r\n      petStore.currentPet.id,\r\n      [] // TODO: 传入实际行为记录\r\n    )\r\n  } catch (error) {\r\n    console.error('加载进化候选失败:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nasync function selectEvolutionPath(path: string) {\r\n  if (!confirm(`确定要进化为 ${path} 吗?`)) return\r\n\r\n  loading.value = true\r\n  try {\r\n    await petStore.evolve(path)\r\n    alert('进化成功!')\r\n    evolutionCandidates.value = null\r\n  } catch (error) {\r\n    console.error('进化失败:', error)\r\n    alert('进化失败,请重试')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n</script>\r\n"],"names":["petStore","usePetStore","mcpGetEvolution","useMCP","loading","ref","evolutionCandidates","loadEvolutionCandidates","error","selectEvolutionPath","path","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_router_link","_cache","_createElementVNode","_hoisted_2","_unref","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_Fragment","_renderList","candidate","$event","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","req","_hoisted_21","_hoisted_13","_hoisted_22"],"mappings":"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"}