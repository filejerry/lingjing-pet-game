import{u as C}from"./index-D-xWN9oA.js";import{u as h}from"./pet-B_LAlSfv.js";import{u as b}from"./useMCP-Ihbamx9p.js";import{a as S,r as k,v as g,h as o,e as L,j as s,f as w,y as P,x as N,i as V,F as p,z as m,u as c,t as d,o as r,n as B}from"./vue-vendor-BrcR7j7v.js";import"./ui-vendor-B9ygI19o.js";const z={class:"min-h-screen p-6"},A={class:"max-w-4xl mx-auto"},F={class:"card mb-6 min-h-[400px]"},I={id:"storyContent",class:"space-y-4 max-h-[500px] overflow-y-auto p-4"},M={class:"text-lg leading-relaxed"},$={key:0,class:"text-center text-gray-400"},j={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D=["onClick"],E={key:1,class:"flex gap-4"},T=["disabled"],Q=S({__name:"Adventure",setup(q){const e=C(),l=h(),{generateStory:u}=b(),n=k(!1);g(()=>{l.currentPet||(e.addStoryLine("欢迎来到灵境斗宠录!","text-xl font-bold"),e.addStoryLine("请先创建一只宠物开始你的冒险。","text-gray-400"))});async function x(){if(!l.currentPet){alert("请先创建宠物");return}n.value=!0,e.setScene("forest");try{const a=await u({type:"adventure",petId:l.currentPet.id,scene:"forest",action:"explore"});e.addStoryLine(a),e.setChoices([{id:"1",text:"深入森林探索",action:"explore_deep"},{id:"2",text:"返回营地休息",action:"return_camp"}])}catch(a){console.error("冒险开始失败:",a),e.addStoryLine("冒险生成失败,请重试。","text-red-500")}finally{n.value=!1}}async function f(a){n.value=!0,e.clearChoices();try{const t=await u({type:"adventure",petId:l.currentPet.id,action:a.action});e.addStoryLine(`你选择了: ${a.text}`,"text-yellow-400 font-bold"),e.addStoryLine(t)}catch(t){console.error("选择处理失败:",t)}finally{n.value=!1}}function _(){e.clearStoryLines(),e.clearChoices()}return(a,t)=>{const v=N("router-link");return r(),o("div",z,[L(v,{to:"/",class:"btn-secondary mb-6 inline-block"},{default:w(()=>[...t[0]||(t[0]=[P(" ← 返回首页 ",-1)])]),_:1}),s("div",A,[t[2]||(t[2]=s("h1",{class:"text-4xl font-bold mb-6"},"⚔️ 冒险模式",-1)),s("div",F,[s("div",I,[(r(!0),o(p,null,m(c(e).storyLines,(i,y)=>(r(),o("div",{key:y,class:B(["animate-slide-up",i.cssClass])},[s("p",M,d(i.text),1)],2))),128)),n.value?(r(),o("div",$,[...t[1]||(t[1]=[s("div",{class:"animate-pulse-slow"},"生成中...",-1)])])):V("",!0)])]),c(e).currentChoices.length>0?(r(),o("div",j,[(r(!0),o(p,null,m(c(e).currentChoices,i=>(r(),o("button",{key:i.id,onClick:y=>f(i),class:"btn-primary text-left p-4"},d(i.text),9,D))),128))])):(r(),o("div",E,[s("button",{onClick:x,class:"btn-primary",disabled:n.value},d(n.value?"生成中...":"开始新冒险"),9,T),s("button",{onClick:_,class:"btn-secondary"}," 清空剧情 ")]))])])}}});export{Q as default};
//# sourceMappingURL=Adventure-DKf01JyC.js.map
