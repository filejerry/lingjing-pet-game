# 《灵境斗宠录》环境配置 - Supabase版本
# 复制此文件为 .env 并填入真实配置

# =====================================================
# 应用基础配置
# =====================================================
NODE_ENV=production
PORT=14000

# =====================================================
# 数据库配置 (新增 Supabase)
# =====================================================

# 数据库类型选择: supabase 或 sqlite
DATABASE_TYPE=supabase

# Supabase 配置 (生产环境)
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-key
SUPABASE_DB_URL=postgresql://postgres:[YOUR-PASSWORD]@db.your-project-ref.supabase.co:5432/postgres

# SQLite 配置 (本地开发备用)
SQLITE_DB_PATH=./data/pets.db

# 数据库连接池配置
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=30000

# =====================================================
# AI 服务配置
# =====================================================

# Kimi文本模型配置 (实时对话)
KIMI_API_URL=https://ark.cn-beijing.volces.com/api/v3/chat/completions
KIMI_API_KEY=your-kimi-api-key-here
KIMI_MODEL=kimi-k2-250905

# DeepSeek模型配置 (批量推理)
DEEPSEEK_API_URL=https://ark.cn-beijing.volces.com/api/v3/chat/completions
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_MODEL=ep-bi-20250930180557-kb2f9

# 即梦4.0图像模型配置 (美术资源)
AI_IMAGE_API_URL=https://ark.cn-beijing.volces.com/api/v3/images/generate
AI_IMAGE_API_KEY=your-image-api-key-here
AI_IMAGE_MODEL=ep-20250930175835-vxgn4

# 火山引擎批量推理配置
ARK_API_KEY=your-ark-api-key-here

# AI 服务通用配置
AI_MAX_REQUESTS_PER_HOUR=1000
AI_CACHE_TTL=604800
AI_TIMEOUT=30000
AI_RETRY_TIMES=3
AI_RETRY_DELAY=1000

# =====================================================
# 批量推理配置
# =====================================================
BATCH_MAX_CONCURRENT=1000
BATCH_DEFAULT_TASK_NUM=100
BATCH_TIMEOUT=86400000

# =====================================================
# 安全配置
# =====================================================

# JWT密钥 (用于用户认证)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# CORS 允许的源
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:14000,https://your-domain.vercel.app

# API 限流配置
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100

# 敏感词过滤
ENABLE_CONTENT_FILTER=true

# =====================================================
# 日志配置
# =====================================================
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7

# =====================================================
# 游戏功能配置
# =====================================================

# 文字演出速度(秒/行)
TEXT_SPEED_DEFAULT=1.5
TEXT_SPEED_MIN=0.5
TEXT_SPEED_MAX=3.0

# 宠物系统
MAX_PETS_PER_USER=50
EVOLUTION_MIN_LEVEL=20
EVOLUTION_MIN_BOND=30

# 抽卡概率
GACHA_SSR_RATE=0.01
GACHA_SSS_RATE=0.001

# 每日奖励
DAILY_LOGIN_BONUS=100
DAILY_QUEST_RESET_HOUR=0

# =====================================================
# 缓存配置
# =====================================================

# AI响应缓存时间(小时)
AI_CACHE_EXPIRE_HOURS=168

# 宠物数据缓存时间(秒)
PET_CACHE_TTL=300

# Redis配置(可选,如果使用Redis缓存)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=
# REDIS_DB=0

# =====================================================
# 监控与分析
# =====================================================

# 启用性能监控
ENABLE_PERFORMANCE_MONITORING=true

# Sentry错误跟踪(可选)
# SENTRY_DSN=https://your-sentry-dsn

# 数据分析(可选)
# ANALYTICS_API_KEY=your-analytics-key

# =====================================================
# Vercel 部署配置
# =====================================================

# Vercel自动设置,无需手动配置
# VERCEL=1
# VERCEL_URL=your-app.vercel.app

# =====================================================
# 开发调试配置
# =====================================================

# 启用调试模式
DEBUG=false

# 显示SQL查询日志
LOG_SQL_QUERIES=false

# 跳过AI调用(用于测试)
SKIP_AI_CALLS=false

# 使用模拟数据
USE_MOCK_DATA=false
